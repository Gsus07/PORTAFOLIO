<!-- Navbar -->
<nav
  class="fixed top-1 z-50 w-full bg-white/70 backdrop-blur-lg shadow-xl border-b border-white/30 rounded-b-2xl transition-all duration-300 ease-in-out"
  style="box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);"
>
  <div
    class="mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8"
  >
    <a href="/" class="logo-shine text-2xl font-bold text-indigo-600 hover:text-purple-700 drop-shadow-lg transition-all duration-700 ease-out hover:scale-110 hover:drop-shadow-2xl">
      JCF
    </a>

    <ul class="hidden gap-8 md:flex">
      <li class="relative group">
        <a href="#about" data-section="about" class="nav-link text-slate-700 transition-all duration-300 ease-out hover:text-purple-600 relative px-4 py-3 rounded-lg hover:bg-white/15 hover:shadow-lg hover:-translate-y-0.5 overflow-hidden">
          <span class="flex items-center gap-2 relative">
            <span class="section-indicator w-2 h-2 rounded-full bg-slate-300 transition-all duration-300"></span>
            Acerca de mí
            <span class="absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-purple-500 to-indigo-500 transition-all duration-300 ease-out scale-x-0 group-hover:scale-x-100 rounded-full origin-left"></span>
          </span>
        </a>
      </li>
      <li class="relative group">
        <a href="#skills" data-section="skills" class="nav-link text-slate-700 transition-all duration-300 ease-out hover:text-purple-600 relative px-4 py-3 rounded-lg hover:bg-white/15 hover:shadow-lg hover:-translate-y-0.5 overflow-hidden">
          <span class="flex items-center gap-2 relative">
            <span class="section-indicator w-2 h-2 rounded-full bg-slate-300 transition-all duration-300"></span>
            Habilidades
            <span class="absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-purple-500 to-indigo-500 transition-all duration-300 ease-out scale-x-0 group-hover:scale-x-100 rounded-full origin-left"></span>
          </span>
        </a>
      </li>
      <li class="relative group">
        <a href="#experience" data-section="experience" class="nav-link text-slate-700 transition-all duration-300 ease-out hover:text-purple-600 relative px-4 py-3 rounded-lg hover:bg-white/15 hover:shadow-lg hover:-translate-y-0.5 overflow-hidden">
          <span class="flex items-center gap-2 relative">
            <span class="section-indicator w-2 h-2 rounded-full bg-slate-300 transition-all duration-300"></span>
            Experiencia
            <span class="absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-purple-500 to-indigo-500 transition-all duration-300 ease-out scale-x-0 group-hover:scale-x-100 rounded-full origin-left"></span>
          </span>
        </a>
      </li>
      <li class="relative group">
        <a href="#projects" data-section="projects" class="nav-link text-slate-700 transition-all duration-300 ease-out hover:text-purple-600 relative px-4 py-3 rounded-lg hover:bg-white/15 hover:shadow-lg hover:-translate-y-0.5 overflow-hidden">
          <span class="flex items-center gap-2 relative">
            <span class="section-indicator w-2 h-2 rounded-full bg-slate-300 transition-all duration-300"></span>
            Proyectos
            <span class="absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-purple-500 to-indigo-500 transition-all duration-300 ease-out scale-x-0 group-hover:scale-x-100 rounded-full origin-left"></span>
          </span>
        </a>
      </li>
      <li class="relative group">
        <a href="#contact" data-section="contact" class="nav-link text-slate-700 transition-all duration-300 ease-out hover:text-purple-600 relative px-4 py-3 rounded-lg hover:bg-white/15 hover:shadow-lg hover:-translate-y-0.5 overflow-hidden">
          <span class="flex items-center gap-2 relative">
            <span class="section-indicator w-2 h-2 rounded-full bg-slate-300 transition-all duration-300"></span>
            Contacto
            <span class="absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-purple-500 to-indigo-500 transition-all duration-300 ease-out scale-x-0 group-hover:scale-x-100 rounded-full origin-left"></span>
          </span>
        </a>
      </li>
    </ul>

    <!-- Hamburger (móvil) -->
    <button id="mobile-menu-btn" class="flex flex-col gap-1 md:hidden focus:outline-none p-3 rounded-xl hover:bg-white/20 transition-all duration-500 hover:scale-110 active:scale-95">
      <span class="hamburger-line h-0.5 w-6 bg-slate-800 rounded transition-all duration-500 ease-in-out"></span>
      <span class="hamburger-line h-0.5 w-6 bg-slate-800 rounded transition-all duration-500 ease-in-out"></span>
      <span class="hamburger-line h-0.5 w-6 bg-slate-800 rounded transition-all duration-500 ease-in-out"></span>
    </button>
  </div>

  <!-- Menú móvil -->
  <ul
    id="mobile-menu"
    class="hidden flex-col gap-4 bg-white/90 px-4 pb-4 shadow-xl rounded-b-2xl border-b border-white/30 md:hidden transition-all duration-300 ease-in-out"
  >
    <li class="relative group mobile-menu-item opacity-0 translate-y-2">
      <a href="#about" data-section="about" class="nav-link text-slate-700 transition-all duration-200 ease-out hover:text-purple-600 block px-4 py-3 rounded-lg hover:bg-white/20 hover:shadow-md hover:translate-x-1">
        <span class="flex items-center gap-2">
          <span class="section-indicator w-2 h-2 rounded-full bg-slate-300 transition-all duration-300"></span>
          Acerca de mí
        </span>
      </a>
    </li>
    <li class="relative group mobile-menu-item opacity-0 translate-y-2">
      <a href="#skills" data-section="skills" class="nav-link text-slate-700 transition-all duration-200 ease-out hover:text-purple-600 block px-4 py-3 rounded-lg hover:bg-white/20 hover:shadow-md hover:translate-x-1">
        <span class="flex items-center gap-2">
          <span class="section-indicator w-2 h-2 rounded-full bg-slate-300 transition-all duration-300"></span>
          Habilidades
        </span>
      </a>
    </li>
    <li class="relative group mobile-menu-item opacity-0 translate-y-2">
      <a href="#experience" data-section="experience" class="nav-link text-slate-700 transition-all duration-200 ease-out hover:text-purple-600 block px-4 py-3 rounded-lg hover:bg-white/20 hover:shadow-md hover:translate-x-1">
        <span class="flex items-center gap-2">
          <span class="section-indicator w-2 h-2 rounded-full bg-slate-300 transition-all duration-300"></span>
          Experiencia
        </span>
      </a>
    </li>
    <li class="relative group mobile-menu-item opacity-0 translate-y-2">
      <a href="#projects" data-section="projects" class="nav-link text-slate-700 transition-all duration-200 ease-out hover:text-purple-600 block px-4 py-3 rounded-lg hover:bg-white/20 hover:shadow-md hover:translate-x-1">
        <span class="flex items-center gap-2">
          <span class="section-indicator w-2 h-2 rounded-full bg-slate-300 transition-all duration-300"></span>
          Proyectos
        </span>
      </a>
    </li>
    <li class="relative group mobile-menu-item opacity-0 translate-y-2">
      <a href="#contact" data-section="contact" class="nav-link text-slate-700 transition-all duration-200 ease-out hover:text-purple-600 block px-4 py-3 rounded-lg hover:bg-white/20 hover:shadow-md hover:translate-x-1">
        <span class="flex items-center gap-2">
          <span class="section-indicator w-2 h-2 rounded-full bg-slate-300 transition-all duration-300"></span>
          Contacto
        </span>
      </a>
    </li>
  </ul>
</nav>

<style>
  /* Scroll suave para toda la página */
  html {
    scroll-behavior: smooth;
    scroll-padding-top: 80px; /* Compensar la altura del navbar fijo */
  }

  /* Transiciones mejoradas para navegación */
  .nav-link {
    position: relative;
    z-index: 1;
  }

  /* Animaciones del menú hamburguesa */
  .hamburger-line {
    transition: all 0.2s ease-in-out;
  }

  .hamburger-active .hamburger-line:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
  }

  .hamburger-active .hamburger-line:nth-child(2) {
    opacity: 0;
    transform: scale(0);
  }

  .hamburger-active .hamburger-line:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -6px);
  }

  /* Animaciones del menú móvil */
  #mobile-menu.show {
    display: flex !important;
  }

  #mobile-menu.show .mobile-menu-item {
    animation: slideInFromTop 0.2s ease-out forwards;
  }

  #mobile-menu.show .mobile-menu-item:nth-child(1) {
    animation-delay: 0.02s;
  }

  #mobile-menu.show .mobile-menu-item:nth-child(2) {
    animation-delay: 0.04s;
  }

  #mobile-menu.show .mobile-menu-item:nth-child(3) {
    animation-delay: 0.06s;
  }

  #mobile-menu.show .mobile-menu-item:nth-child(4) {
    animation-delay: 0.08s;
  }

  @keyframes slideInFromTop {
    0% {
      opacity: 0;
      transform: translateY(-5px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Transición suave para el navbar al hacer scroll */
  .navbar-scrolled {
    background: rgba(255, 255, 255, 0.85) !important;
    backdrop-filter: blur(20px);
    box-shadow: 0 12px 40px 0 rgba(31, 38, 135, 0.25) !important;
  }

  /* Clase activa para enlaces */
  .active-link {
    background: rgba(147, 51, 234, 0.1) !important;
    color: #9333ea !important;
  }

  .active-link .section-indicator {
    background: linear-gradient(45deg, #9333ea, #6366f1) !important;
    box-shadow: 0 0 8px rgba(147, 51, 234, 0.4);
    transform: scale(1.2);
  }

  /* Indicadores de progreso */
  .section-indicator {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .section-indicator.completed {
    background: linear-gradient(45deg, #10b981, #059669) !important;
    box-shadow: 0 0 6px rgba(16, 185, 129, 0.3);
  }

  .section-indicator.current {
    background: linear-gradient(45deg, #f59e0b, #d97706) !important;
    box-shadow: 0 0 8px rgba(245, 158, 11, 0.4);
    animation: pulse-indicator 2s infinite;
  }

  @keyframes pulse-indicator {
    0%, 100% { 
      transform: scale(1);
      opacity: 1;
    }
    50% { 
      transform: scale(1.3);
      opacity: 0.8;
    }
  }

  /* Transición suave para el navbar al hacer scroll */
  nav {
    transition: transform 0.3s ease-in-out, background-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
  }

  /* Mejoras en las animaciones existentes */
  .logo-shine {
    background: linear-gradient(45deg, #6366f1, #9333ea, #ec4899, #6366f1);
    background-size: 300% 300%;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradient-shift 3s ease infinite;
  }

  @keyframes gradient-shift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
</style>

<script>
  // Navbar móvil con transiciones mejoradas
  const btn = document.getElementById('mobile-menu-btn');
  const menu = document.getElementById('mobile-menu');
  const navbar = document.querySelector('nav');
  
  btn?.addEventListener('click', () => {
    const isHidden = menu?.classList.contains('hidden');
    
    if (isHidden) {
      // Abrir menú
      menu?.classList.remove('hidden');
      btn?.classList.add('hamburger-active');
      
      // Pequeño delay para permitir que el display: flex tome efecto
      setTimeout(() => {
         menu?.classList.add('show');
       }, 50);
    } else {
      // Cerrar menú
      menu?.classList.remove('show');
      btn?.classList.remove('hamburger-active');
      
      // Esperar a que termine la animación antes de ocultar
      setTimeout(() => {
        menu?.classList.add('hidden');
      }, 600);
    }
  });

  // Cerrar al click en enlace
  document.querySelectorAll('#mobile-menu a').forEach(link =>
    link.addEventListener('click', () => {
      // Cerrar menú inmediatamente
      menu?.classList.remove('show');
      btn?.classList.remove('hamburger-active');
      
      setTimeout(() => {
        menu?.classList.add('hidden');
      }, 150);
    })
  );
</script>